<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>


    <script>
        class wordgame {
            constructor() {
                this.speed = 2;
                this.times = "";
                this.endTimes = "";
                this.create();
                this.times = setInterval(() => {
                    this.create();
                }, 1000)+"aa";

                this.keycode();
            }

            keycode() {
                document.body.onkeydown = function (eve) {  
                  
                        eve = eve || window.event;
                        let codekey = eve.codekey || eve.which;
                        codekey = String.fromCharCode(codekey);
                        let divs = document.getElementsByTagName("div");
                    
                        for(let i=0;i<divs.length;i++)
                        {
                           // if(i==1) continue;
                            if (codekey === divs[i].innerText) {
                               // clearInterval(i+1);  //div 移除后 定时器是否还存在？？？？？存在
                                divs[i].remove();
                                return;
                        }
                        }
                    }
            }



            // document.body.onkeydown=function(eve){
            //         eve = eve || window.event;
            //         let codekey = eve.codekey || eve.which;
            //         codekey = String.fromCharCode(codekey);
            //         console.log(codekey);
            //         if(codekey===div.innerText)
            //            {
            //             clearInterval(times);
            //             div.remove();
            //            }


            move(div) {
                let times = "";
                clearInterval(times);
                times = setInterval(() => {
                   
                    div.style.top = div.offsetTop + this.speed + "px";
                    if (div.offsetTop >= document.documentElement.clientHeight - div.offsetHeight) {
                        div.style.top = document.documentElement.clientHeight - div.offsetHeight + "px";
                        clearInterval(this.times);
                        for (let i = 1; i <= this.endTimes; i++)
                                clearInterval(i);
                        window.alert("GAME OVER");
                    }
                }, 30);
              
                this.endTimes = times;
            }
            create() {
                let div = document.createElement("div");
                Object.assign(div.style, {
                    width: "50px",
                    height: "50px",
                    borderRadius: "50%",
                    background: "red",
                    position: "absolute",
                    top: 0,
                    left: this.rand(document.documentElement.clientWidth - 50) + "px",
                    color: "#fff",
                    lineHeight: "50px",
                    textAlign: "center",
                    fontSize: "16px"
                });
                div.innerText = String.fromCharCode(this.rand(26) + 65);
                document.body.appendChild(div);
                this.move(div);
            }
            rand(max, min = 0) {
                return Math.floor(Math.random() * (max - min) + min);
            }

        }
        new wordgame;
    </script>
</body>

</html>